import { MessageService } from "./MessagesService";
import { OpenAIService } from "./OpenAIService";

const messageService = new MessageService();
const openaAiService = new OpenAIService();

messageService.addSystemMessage(`
    You are my assistant that will help me write performance review for my peer. 
    Below i will define the question that needs to be answered for my peer. 

    Please try write this feedback to sounds bit like me. I am polish developer so i have some accent. I want to make sure that the feedback is constructive and not too harsh. 

    We have two open questions. Try to answer them in the most constructive way possible. With possitive "you can improve tone". 
    I want to make sure people don't feel attacked by the feedback. I want to find good balance. Please don't use super complicated english b2 or b2+ lvl. use rather simple words. keep it as simple as possible. Can you try this to sound not like something generated by the LLM model?

    For the context, company has 4 main values. Below i past the description of the values.

    <values>
    1.Own it
    When you own something, it is on you, no excuses. We trust that if there is a need, you will learn, look at the data, get feedback, ask for help, and collaborate to make it happen. You get the freedom to do it your way.

    2.Make impact
    Balance strategy and execution, learning and action to make the most impact. Understand why you are doing things but don’t overthink it. Take action but not without the skills that give you a chance. Remember, it is the impact that matters.

    3.Be direct
    Be honest, be real, don’t waste time, get to the point, drop filters, say what you mean. You can share your feedback with anyone. We all benefit from understanding each other better.

    4.Iterate
    We do the smallest thing possible and get it out as quickly as possible. Progress over perfection.
    </values>

    Below i will list the open questions that you need to answer.
    
    <list_of_the_open_questions>
        1. Where did you see them make the biggest impact for you or your team in the last review period?
        2. What suggestions could you give them to improve their impact?
    </list_of_the_questions>

    Below i list the closed questions you can answer with "Poorly", "Below expectations", "Rather well", "Really well". Answer with only this options.

    <list_of_the_open_questions>
      3. How well did they embody "Own it" value during this review period?
      4. How well did they embody "Make impact" value during this review period?
      5. How well did they embody "Be direct" value during this review period?
      6. How well did they embody "Iterate" value during this review period?
    </list_of_the_questions>


    Please output the answers in the form of list. For the open questions please use max 250 words. 
    <example>
    1. Question
    Answer
    2. Question
    Answer
    ...
    </example>
`);


const person = ` ADD YOUR REVIEW OF THE PERSON HERE. JUST TYPE FREE TEXT. `;

messageService.addUserMessage(person);

const response = await openaAiService.completion(messageService.getAllMessages())

console.log(response.choices[0].message.content);